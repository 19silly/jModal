(function(c,b,a){c.jModal=function(g){var m=function(){console.log("jmodal init");$(".jmodal").click(function(q){q.preventDefault();var p=$(this);(p.data("type")==="image")?e(p,i):n(p,i)})};var e=function(s,r){var q=s;var p=document.createElement("img");p.onload=function(){r(p,s)};p.src=q.attr("href")};var n=function(s,r){var q=s;var p='<iframe width="640" height="390" src="http://www.youtube.com/embed/'+d(q.attr("href"))+'" frameborder="0" allowfullscreen></iframe>';r(p,q)};var d=function(r){var u=r.split("?");var t=u[1].split("&");var p="";for(var s=0;s<t.length;s++){if(t.indexOf("v=")){var q=t[s].split("=");p=q[1];break}}return p};var i=function(w,u){var s=$('<div id="jmodal-modal"><div class="jmodal-content"></div><a href="#" class="jmodal-close">X</a></div>').appendTo("body");l();o(u);var v=s.find(".jmodal-content");v.append(w);var q=s.outerHeight();var t=s.outerWidth();var p=v.height();var r=v.width();s.css({height:p,width:r});s.css({"margin-left":((t/2)*-1),top:((q*-1)-20)}).delay(300).animate({top:(((q-$(window).height())/2)*-1)},200,function(){h(s);s.css({"margin-top":((q/2)*-1),top:"50%"})})};var h=function(r){var q=$(r);var p=q.outerHeight();$(".jmodal-close, #UIBlock").click(function(s){s.preventDefault();q.css({"margin-top":0,top:q.offset().top}).animate({top:((p*-1)-20)},200,function(){q.remove();k()})})};var o=function(r){var q="";if($(r).attr("rel")){var p=1;$("[rel="+$(r).attr("rel")+"]").each(function(){var s=($(this).attr("href")===$(r).attr("href"))?"selected":"";q+='<a href="'+$(this).attr("href")+'" class="jmodal-gallery-link '+s+'">'+p+"</a>";p++});$("#jmodal-modal").addClass("jmodal-modal-gallery").append('<p class="jmodal-gallery-links"><a href="#" class="jmodal-gallery-prev">Prev</a>'+q+'<a href="#" class="jmodal-gallery-next">Next</a></p>');j()}};var j=function(){$(".jmodal-gallery-link").click(function(q){q.preventDefault();var p=$(this);if(!p.hasClass("selected")){$(".jmodal-content img").animate({opacity:0},100);e(p,f)}});$(".jmodal-gallery-prev").click(function(r){r.preventDefault();var q=$(".jmodal-gallery-links .selected");var p=q.prev().not(this);if(p.length!==0){$(".jmodal-content img").animate({opacity:0},100);e(p,f)}});$(".jmodal-gallery-next").click(function(r){r.preventDefault();var q=$(".jmodal-gallery-links .selected");var p=q.next().not(this);if(p.length!==0){$(".jmodal-content img").animate({opacity:0},100);e(p,f)}})};var f=function(q,u){var s=$("#jmodal-modal");var v=s.find(".jmodal-content").empty();$(".jmodal-gallery-link.selected").removeClass("selected");$(u).addClass("selected");var r=$(q);r.appendTo(v).css({opacity:0});var p=r.height();var t=r.width();s.animate({height:p,"margin-left":((t+32)/2)*-1,"margin-top":((p+86)/2)*-1,width:t},300,function(){r.animate({opacity:1},300)})};var l=function(){if($("#UIBlock").length===0){$('<div id="UIBlock" />').css({background:"#000",height:"100%",left:0,opacity:0,position:"fixed",top:0,width:"100%",zIndex:900}).appendTo("body").animate({opacity:0.8},100);if($.browser.msie&&($.browser.version<7)){$("#UIBlock").css({position:"absolute",top:$(window).scrollTop()})}}};var k=function(){$("#UIBlock").fadeOut(100,function(){$(this).remove()})};m()}}(this,this.document));